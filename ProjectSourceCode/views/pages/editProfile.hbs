<head>
        <style>
        body {
            background-image: url('editProfileImg.jpg');
            background-size: cover; /* Makes the image cover the entire background */
            background-repeat: no-repeat; /* Prevents the image from repeating */
            background-position: center; /* Centers the background image */
        }
    </style>
</head>
<div class="container mt-5">
    <h2>Edit Profile</h2>

    <!-- Username Field -->
    <div class="form-group">
        <label for="username">Username</label>
        <input type="text" class="form-control" id="username" value="{{user.username}}">
    </div>

    <!-- Email Field -->
    <div class="form-group">
        <label for="email">Email</label>
        <input type="email" class="form-control" id="email" value="{{user.email}}">
    </div>

    <!-- Password Field -->
    <div class="form-group">
        <label for="password">New Password</label>
        <input type="password" class="form-control" id="password" placeholder="Enter new password">
    </div>

    <!-- Confirm Password Field -->
    <div class="form-group">
        <label for="confirmPassword">Confirm Password</label>
        <input type="password" class="form-control" id="confirmPassword" placeholder="Confirm new password">
    </div>

    <!-- Save and Cancel Buttons -->
    <button class="btn btn-success" onclick="saveChanges()">Save Changes</button>
    <a href="/profile" class="btn btn-secondary">Cancel</a>
    <script>
        function saveChanges() {
            const username = document.getElementById('username').value;
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirmPassword').value;

            // Check if password and confirm password match
            if (password !== confirmPassword) {
                alert("Passwords do not match!");
                return;
            }

            // Send updated data to the server
            fetch('/updateProfile', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ username, email, password })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert("Profile updated successfully!");
                    window.location.href = '/profile'; // Redirect to profile page
                } else {
                    alert("Failed to update profile.");
                }
            })
            .catch(error => console.error('Error:', error));
        }
</div>

